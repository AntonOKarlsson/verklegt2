{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">

    <h1 class="text-center">Find your castle today!</h1>

    <!-- Search Filters -->
    <div class="card p-3 mb-4 shadow-sm">
        <form>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-6 g-2 align-items-end">

                <div class="col">
                    <label for="search-input" class="form-label">Title or Address</label>
                    <input type="text" id="search-input" class="form-control" placeholder="Search by address" autocomplete="off">
                </div>

                <div class="col">
                    <label for="postal-code" class="form-label">Postal Code</label>
                    <select id="postal-code" class="form-select">
                        <option value="">Any</option>
                        {% for code in postal_codes %}
                            <option value="{{ code }}">{{ code }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col">
                    <label for="price-range" class="form-label">Price Range</label>
                    <select id="price-range" class="form-select">
                        <option value="">Any</option>
                        <option value="0-50000000">0–50m</option>
                        <option value="50000001-100000000">50–100m</option>
                        <option value="100000001-150000000">100–150m</option>
                        <option value="150000001-200000000">150–200m</option>
                        <option value="200000001+">200m+</option>
                    </select>
                </div>

                <div class="col">
                    <label for="size-range" class="form-label">Size (m²)</label>
                    <select id="size-range" class="form-select">
                        <option value="">Any</option>
                        <option value="0-50">0–50</option>
                        <option value="51-100">51–100</option>
                        <option value="101-150">101–150</option>
                        <option value="151-200">151–200</option>
                        <option value="201+">200+</option>
                    </select>
                </div>

                <div class="col">
                    <label for="room-range" class="form-label">Rooms</label>
                    <select id="room-range" class="form-select">
                        <option value="">Any</option>
                        <option value="1-2">1–2</option>
                        <option value="3-4">3–4</option>
                        <option value="5+">5+</option>
                    </select>
                </div>

                <div class="col">
                    <label for="property-type" class="form-label">Property Type</label>
                    <select id="property-type" class="form-select">
                        <option value="">Any</option>
                        {% for type in property_types %}
                            <option value="{{ type }}">{{ type|capfirst }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col">
                    <label for="order-by" class="form-label">Order by</label>
                    <select id="order-by" class="form-select">
                        <option value="">Default</option>
                        <option value="title">Name (A–Z)</option>
                        <option value="-title">Name (Z–A)</option>
                        <option value="price">Price (Low–High)</option>
                        <option value="-price">Price (High–Low)</option>
                    </select>
                </div>

                <div class="col">
                    <label class="form-label d-none d-sm-block">&nbsp;</label>
                    <button type="button" id="search-icon" class="btn btn-primary w-100">Search</button>
                </div>

            </div>
        </form>
    </div>

    <!-- Search Results -->
    <div class="row" id="result-list"></div>

</div>

<script src="{% static 'js/property_filter.js' %}?v=3"></script>
{% endblock %}
